(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(10),r=n.n(o),u=(n(22),n(16)),l=n(11),c=n(12),s=n(14),m=n(13),f=n(15),h=function(e){var t=e.addPerson,n=e.newName,a=e.handleNameChange,o=e.newNumber,r=e.handleNumberChange;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:t},i.a.createElement("div",null,"nimi: ",i.a.createElement("input",{value:n,onChange:a})),i.a.createElement("div",null,"numero: ",i.a.createElement("input",{value:o,onChange:r})),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},d=function(e){var t=e.filter,n=e.handleFilterChange;return i.a.createElement("div",null,i.a.createElement("form",null,"rajaa n\xe4ytett\xe4vi\xe4: ",i.a.createElement("input",{value:t,onChange:n})))},p=n(2),v=n.n(p),w="/api/persons",b={getAll:function(){return v.a.get(w).then(function(e){return e.data})},create:function(e){return v.a.post(w,e).then(function(e){return e.data})},update:function(e,t){return v.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return v.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})}},g=function(e){var t=e.message;return null===t?null:i.a.createElement("div",{className:"error"},t)},N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};if(n.state.persons.map(function(e){return e.name}).includes(t.name)){if(window.confirm("".concat(t.name," on jo luettelossa, korvataanko vanha numero uudella?"))){var a=n.state.persons.find(function(e){return e.name===t.name}),i=Object(u.a)({},a,{number:n.state.newNumber});b.update(a.id,i).then(function(e){var t=n.state.persons.filter(function(e){return e.id!==a.id});n.setState({notification:"p\xe4ivitettiin henkil\xf6n ".concat(a.name," numero"),persons:t.concat(e)}),setTimeout(function(){n.setState({notification:null})},5e3)}).catch(function(e){b.create(i).then(function(e){b.getAll().then(function(t){n.setState({persons:t,notification:"henkil\xf6 ".concat(e.name," oli jo poistettu ja nyt uudelleenlis\xe4tty"),newName:"",newNumber:""}),setTimeout(function(){n.setState({notification:null})})})})})}}else b.create(t).then(function(e){n.setState({notification:"lis\xe4ttiin henkil\xf6 ".concat(e.name),persons:n.state.persons.concat(e),newName:"",newNumber:""}),setTimeout(function(){n.setState({notification:null})},5e3)})},n.handleDeleteOf=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e});window.confirm("poistetaanko varmasti ".concat(t.name,"?"))&&b.remove(e).then(function(a){n.setState({notification:"poistettiin ".concat(t.name),persons:n.state.persons.filter(function(t){return t.id!==e})}),setTimeout(function(){n.setState({notification:null})},5e3)})}},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",notification:null},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toLowerCase().startsWith(e.state.filter.toLowerCase())});return i.a.createElement("div",null,i.a.createElement("h2",null,"Puhelinluettelo"),i.a.createElement(g,{message:this.state.notification}),i.a.createElement("div",null,i.a.createElement(d,{filter:this.state.filter,handleFilterChange:this.handleFilterChange})),i.a.createElement("h3",null,"Lis\xe4\xe4 uusi / muuta olemassaolevaa numeroa"),i.a.createElement(h,{addPerson:this.addPerson,newName:this.state.newName,handleNameChange:this.handleNameChange,newNumber:this.state.newNumber,handleNumberChange:this.handleNumberChange}),i.a.createElement("h2",null,"Numerot"),t.map(function(t){return i.a.createElement("p",{key:t.name},t.name," ",t.number," ",i.a.createElement("button",{onClick:e.handleDeleteOf(t.id)},"poista"))}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.7b3fc9aa.chunk.js.map